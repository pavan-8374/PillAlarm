Index: app/src/main/java/com/example/pillalarm/MainActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.pillalarm\r\n\r\nimport android.os.Bundle\r\nimport androidx.activity.ComponentActivity\r\nimport androidx.activity.compose.setContent\r\nimport androidx.compose.foundation.layout.fillMaxSize\r\nimport androidx.compose.material3.MaterialTheme\r\nimport androidx.compose.material3.Surface\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.example.pillalarm.ui.screen.FirebaseAuthRepository\r\nimport com.example.pillalarm.auth.LoginViewModel\r\nimport com.example.pillalarm.ui.screen.LoginScreen\r\nimport com.example.pillalarm.ui.screen.SignupScreen\r\nimport com.example.pillalarm.ui.screen.SplashScreen\r\nimport com.example.pillalarm.ui.screen.HomeScreen\r\nimport com.example.pillalarm.ui.theme.PillAlarmTheme\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\n\r\nclass MainActivity : ComponentActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        val repo = FirebaseAuthRepository()\r\n        val factory = LoginViewModel.Factory(repo)\r\n\r\n        setContent {\r\n            PillAlarmTheme {\r\n                Surface(\r\n                    modifier = Modifier.fillMaxSize(),\r\n                    color = MaterialTheme.colorScheme.background\r\n                ) {\r\n                    val navController = rememberNavController()\r\n\r\n                    NavHost(\r\n                        navController = navController,\r\n                        startDestination = \"splash\"\r\n                    ) {\r\n                        composable(\"splash\") {\r\n                            SplashScreen(\r\n                                onSplashFinished = {\r\n                                    navController.navigate(\"login\") {\r\n                                        popUpTo(\"splash\") { inclusive = true }\r\n                                    }\r\n                                }\r\n                            )\r\n                        }\r\n                        composable(\"login\") {\r\n                            val loginVm: LoginViewModel = viewModel(factory = factory)\r\n                            LoginScreen(\r\n                                onNavigateToSignUp = {\r\n                                    navController.navigate(\"signup\")\r\n                                },\r\n                                onLoginSuccess = {\r\n                                    navController.navigate(\"home\") {\r\n                                        popUpTo(\"login\") { inclusive = true }\r\n                                    }\r\n                                },\r\n                                loginViewModel = loginVm\r\n                            )\r\n                        }\r\n                        composable(\"signup\") {\r\n                            SignupScreen(\r\n                                onNavigateToLogin = {\r\n                                    navController.popBackStack()\r\n                                }\r\n                            )\r\n                        }\r\n                        composable(\"home\") {\r\n                            HomeScreen()\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/pillalarm/MainActivity.kt b/app/src/main/java/com/example/pillalarm/MainActivity.kt
--- a/app/src/main/java/com/example/pillalarm/MainActivity.kt	(revision 185f2e8bb5af37a9fa0c7791bd5a0c7d8750e7fe)
+++ b/app/src/main/java/com/example/pillalarm/MainActivity.kt	(date 1764198030007)
@@ -69,7 +69,7 @@
                             )
                         }
                         composable("home") {
-                            HomeScreen()
+                            HomeScreen(navController = rememberNavController())
                         }
                     }
                 }
Index: app/src/main/java/com/example/pillalarm/ui/screen/LoginScreen.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.pillalarm.ui.screen\r\n\r\n// I am importing the necessary libraries which are essential for my login screen implementation.\r\nimport android.util.Log\r\nimport android.util.Patterns\r\nimport android.widget.Toast\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.text.KeyboardOptions\r\nimport androidx.compose.ui.text.input.KeyboardType\r\nimport androidx.compose.material.icons.Icons\r\nimport androidx.compose.material.icons.filled.Visibility\r\nimport androidx.compose.material.icons.filled.VisibilityOff\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.platform.LocalInspectionMode\r\nimport androidx.compose.ui.text.input.PasswordVisualTransformation\r\nimport androidx.compose.ui.text.input.VisualTransformation\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.compose.ui.tooling.preview.Preview\r\nimport com.example.pillalarm.auth.LoginViewModel\r\nimport com.example.pillalarm.ui.theme.PillAlarmTheme\r\n\r\n@Composable\r\nfun LoginScreen(\r\n    onNavigateToSignUp: () -> Unit,\r\n    onLoginSuccess: () -> Unit,\r\n    loginViewModel: LoginViewModel = viewModel() // provided by Activity Preview\r\n) {\r\n    val context = LocalContext.current\r\n    val isInPreview = LocalInspectionMode.current\r\n\r\n    val email by loginViewModel.email.collectAsState()\r\n    val password by loginViewModel.password.collectAsState()\r\n    val isLoading by loginViewModel.isLoading.collectAsState()\r\n    val errorMsg by loginViewModel.errorMessage.collectAsState()\r\n\r\n    var passwordVisible by remember { mutableStateOf(false) }\r\n\r\n    // show error as Toast (or show inline in UI)\r\n    LaunchedEffect(errorMsg) {\r\n        errorMsg?.let {\r\n            if (!isInPreview) Toast.makeText(context, it, Toast.LENGTH_LONG).show()\r\n        }\r\n    }\r\n\r\n\r\n    //  ----------------  This is UI layout (Composable)  -----------------\r\n    \r\n    Column(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .padding(24.dp),\r\n        verticalArrangement = Arrangement.Center,\r\n        horizontalAlignment = Alignment.CenterHorizontally\r\n    ) {\r\n        Text(\"Login\", fontSize = 32.sp, style = MaterialTheme.typography.headlineLarge)\r\n\r\n        Spacer(Modifier.height(24.dp))\r\n\r\n        OutlinedTextField(\r\n            value = email,\r\n            onValueChange = { loginViewModel.onEmailChange(it) },\r\n            label = { Text(\"Email\") },\r\n            modifier = Modifier.fillMaxWidth(),\r\n            singleLine = true,\r\n            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Email)\r\n        )\r\n\r\n        Spacer(Modifier.height(16.dp))\r\n\r\n        OutlinedTextField(\r\n            value = password,\r\n            onValueChange = { loginViewModel.onPasswordChange(it) },\r\n            label = { Text(\"Password\") },\r\n            modifier = Modifier.fillMaxWidth(),\r\n            singleLine = true,\r\n            visualTransformation = if (passwordVisible) VisualTransformation.None else PasswordVisualTransformation(),\r\n            trailingIcon = {\r\n                IconButton(onClick = { passwordVisible = !passwordVisible }) {\r\n                    Icon(\r\n                        imageVector = if (passwordVisible) Icons.Default.Visibility else Icons.Default.VisibilityOff,\r\n                        contentDescription = \"Toggle password\"\r\n                    )\r\n                }\r\n            },\r\n            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password)\r\n        )\r\n\r\n        Spacer(Modifier.height(24.dp))\r\n\r\n        if (isLoading) {\r\n            CircularProgressIndicator()\r\n            Spacer(Modifier.height(16.dp))\r\n        }\r\n\r\n        Button(\r\n            onClick = {\r\n                if (isInPreview) {\r\n                    // preview behavior: call success directly\r\n                    onLoginSuccess()\r\n                } else {\r\n                    loginViewModel.login(onLoginSuccess)\r\n                }\r\n            },\r\n            modifier = Modifier.fillMaxWidth(),\r\n            enabled = !isLoading\r\n        ) {\r\n            Text(\"Login\")\r\n        }\r\n\r\n        Spacer(Modifier.height(16.dp))\r\n\r\n        TextButton(onClick = onNavigateToSignUp, enabled = !isLoading) {\r\n            Text(\"Don't have an account? Sign Up\")\r\n        }\r\n    }\r\n}\r\n\r\n//This shows the preview of the login screen\r\n\r\n@Preview(showBackground = true)\r\n@Composable\r\nfun LoginScreenPreview() {\r\n    // Use FakeAuthRepository so preview doesnâ€™t call Firebase\r\n    val fakeRepo = FakeAuthRepository(succeed = true)\r\n    val factory = LoginViewModel.Factory(fakeRepo)\r\n    val vm: LoginViewModel = viewModel(factory = factory)\r\n\r\n    PillAlarmTheme {\r\n        LoginScreen(\r\n            onNavigateToSignUp = {},\r\n            onLoginSuccess = {},\r\n            loginViewModel = vm\r\n        )\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/pillalarm/ui/screen/LoginScreen.kt b/app/src/main/java/com/example/pillalarm/ui/screen/LoginScreen.kt
--- a/app/src/main/java/com/example/pillalarm/ui/screen/LoginScreen.kt	(revision 185f2e8bb5af37a9fa0c7791bd5a0c7d8750e7fe)
+++ b/app/src/main/java/com/example/pillalarm/ui/screen/LoginScreen.kt	(date 1764198030013)
@@ -1,8 +1,7 @@
 package com.example.pillalarm.ui.screen
 
 // I am importing the necessary libraries which are essential for my login screen implementation.
-import android.util.Log
-import android.util.Patterns
+
 import android.widget.Toast
 import androidx.compose.foundation.layout.*
 import androidx.compose.foundation.text.KeyboardOptions
Index: app/src/main/java/com/example/pillalarm/ui/screen/FirebaseAuthRepository.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.pillalarm.ui.screen\r\n\r\n\r\nimport com.google.firebase.auth.FirebaseAuth\r\nimport com.google.firebase.auth.FirebaseAuthException\r\nimport com.google.firebase.Firebase\r\nimport com.google.firebase.auth.auth\r\nimport kotlinx.coroutines.tasks.await\r\n\r\n/**\r\n * Allows swapping between real Firebase and fake implementations.\r\n */\r\n\r\ninterface AuthRepository {\r\n    suspend fun signIn(email: String, password: String)\r\n}\r\n\r\n/**\r\n * Real implementation using FirebaseAuth.\r\n */\r\nclass FirebaseAuthRepository(\r\n    private val firebaseAuth: FirebaseAuth = Firebase.auth\r\n) : AuthRepository {\r\n    override suspend fun signIn(email: String, password: String) {\r\n        try {\r\n            firebaseAuth.signInWithEmailAndPassword(email, password).await()\r\n        } catch (e: Exception) {\r\n            throw e\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Fake implementation for previews.\r\n */\r\nclass FakeAuthRepository(\r\n    private val succeed: Boolean = true\r\n) : AuthRepository {\r\n    override suspend fun signIn(email: String, password: String) {\r\n        if (!succeed) {\r\n            throw FirebaseAuthException(\"ERROR\", \"Fake login failed\")\r\n        }\r\n        // Simulate success (no-op)\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/pillalarm/ui/screen/FirebaseAuthRepository.kt b/app/src/main/java/com/example/pillalarm/ui/screen/FirebaseAuthRepository.kt
--- a/app/src/main/java/com/example/pillalarm/ui/screen/FirebaseAuthRepository.kt	(revision 185f2e8bb5af37a9fa0c7791bd5a0c7d8750e7fe)
+++ b/app/src/main/java/com/example/pillalarm/ui/screen/FirebaseAuthRepository.kt	(date 1764198030009)
@@ -40,6 +40,5 @@
         if (!succeed) {
             throw FirebaseAuthException("ERROR", "Fake login failed")
         }
-        // Simulate success (no-op)
     }
 }
\ No newline at end of file
Index: app/src/main/java/com/example/pillalarm/ui/screen/HomeScreen.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.pillalarm.ui.screen\r\n\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.tooling.preview.Preview\r\nimport com.example.pillalarm.ui.theme.PillAlarmTheme\r\n\r\n@Composable\r\nfun HomeScreen() {\r\n    Column(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .padding(24.dp),\r\n        verticalArrangement = Arrangement.Center\r\n    ) {\r\n        Text(\r\n            text = \"Welcome to PillAlarm Home!\",\r\n            style = MaterialTheme.typography.headlineLarge\r\n        )\r\n    }\r\n}\r\n@Preview(showBackground = true)\r\n@Composable\r\nfun HomeScreenPreview() {\r\n    PillAlarmTheme {\r\n        HomeScreen()\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/pillalarm/ui/screen/HomeScreen.kt b/app/src/main/java/com/example/pillalarm/ui/screen/HomeScreen.kt
--- a/app/src/main/java/com/example/pillalarm/ui/screen/HomeScreen.kt	(revision 185f2e8bb5af37a9fa0c7791bd5a0c7d8750e7fe)
+++ b/app/src/main/java/com/example/pillalarm/ui/screen/HomeScreen.kt	(date 1764198030011)
@@ -7,19 +7,59 @@
 import androidx.compose.ui.unit.dp
 import androidx.compose.ui.tooling.preview.Preview
 import com.example.pillalarm.ui.theme.PillAlarmTheme
+import com.google.firebase.auth.FirebaseAuth
+import kotlinx.coroutines.launch
+import androidx.compose.runtime.rememberCoroutineScope
+import androidx.compose.material.icons.Icons
+import androidx.compose.material.icons.filled.Menu
 
+@OptIn(ExperimentalMaterial3Api::class)
 @Composable
-fun HomeScreen() {
-    Column(
-        modifier = Modifier
-            .fillMaxSize()
-            .padding(24.dp),
-        verticalArrangement = Arrangement.Center
-    ) {
-        Text(
-            text = "Welcome to PillAlarm Home!",
-            style = MaterialTheme.typography.headlineLarge
-        )
+fun HomeScreen(onLogout: () -> Unit = {}) {
+    val drawerState = rememberDrawerState(DrawerValue.Closed)
+    val scope = rememberCoroutineScope()
+    val user = FirebaseAuth.getInstance().currentUser
+    val username = user?.email ?: "Guest User"
+
+    ModalNavigationDrawer(
+        drawerState = drawerState,
+        drawerContent = {
+            SideMenu(
+                username = username,
+                onLogout = {
+                    FirebaseAuth.getInstance().signOut()
+                    onLogout()
+                },
+                onMyMedicines = { /* Navigate later */ },
+                onProfile = { /* Navigate later */ }
+            )
+        }
+    ) {
+        Scaffold(
+            topBar = {
+                TopAppBar(
+                    title = { Text("PillAlarm Home") },
+                    navigationIcon = {
+                        IconButton(onClick = { scope.launch { drawerState.open() } }) {
+                            Icon(Icons.Default.Menu, null)
+                        }
+                    }
+                )
+            }
+        ) { padding ->
+            Column(
+                modifier = Modifier
+                    .fillMaxSize()
+                    .padding(padding)
+                    .padding(24.dp),
+                verticalArrangement = Arrangement.Center
+            ) {
+                Text(
+                    text = "Welcome to PillAlarm Home!",
+                    style = MaterialTheme.typography.headlineLarge
+                )
+            }
+        }
     }
 }
 @Preview(showBackground = true)
